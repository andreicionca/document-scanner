<!doctype html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>DocScanner</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
  </head>
  <body>
    <div id="app">
      <!-- Camera View -->
      <div id="camera-container">
        <video id="video" autoplay playsinline muted></video>
        <canvas id="overlay"></canvas>

        <!-- Preset Frame Overlay -->
        <div id="frame-guide" class="hidden">
          <div id="frame-border"></div>
          <span id="frame-label">A4</span>
        </div>

        <!-- Corner Indicators -->
        <div id="corners-container">
          <div class="corner" id="corner-tl"></div>
          <div class="corner" id="corner-tr"></div>
          <div class="corner" id="corner-bl"></div>
          <div class="corner" id="corner-br"></div>
        </div>

        <!-- Lock Indicator -->
        <div id="lock-indicator" class="hidden">
          <span>üîí LOCKED</span>
        </div>
      </div>

      <!-- Controls -->
      <div id="controls">
        <!-- Preset Selector -->
        <div id="preset-bar">
          <button class="preset-btn active" data-preset="auto">Auto</button>
          <button class="preset-btn" data-preset="a4">A4</button>
          <button class="preset-btn" data-preset="a5">A5</button>
          <button class="preset-btn" data-preset="id">Buletin</button>
          <button class="preset-btn" data-preset="receipt">Bon</button>
        </div>

        <!-- Main Controls -->
        <div id="main-controls">
          <button id="btn-flash" class="control-btn" title="Flash">
            <span class="icon">‚ö°</span>
          </button>

          <button id="btn-capture" class="capture-btn" disabled>
            <span class="capture-inner"></span>
          </button>

          <button id="btn-gallery" class="control-btn" title="Galerie">
            <span class="icon">üñºÔ∏è</span>
            <span id="gallery-count" class="badge hidden">0</span>
          </button>
        </div>
      </div>

      <!-- Preview/Edit Modal -->
      <div id="preview-modal" class="modal hidden">
        <div class="modal-header">
          <button id="btn-back" class="modal-btn">‚úï</button>
          <span>Previzualizare</span>
          <button id="btn-confirm" class="modal-btn primary">‚úì</button>
        </div>

        <div id="preview-container">
          <canvas id="preview-canvas"></canvas>

          <!-- Manual Corner Adjustment -->
          <div id="adjust-corners" class="hidden">
            <div class="adjust-corner" id="adj-tl" data-corner="0"></div>
            <div class="adjust-corner" id="adj-tr" data-corner="1"></div>
            <div class="adjust-corner" id="adj-br" data-corner="2"></div>
            <div class="adjust-corner" id="adj-bl" data-corner="3"></div>
          </div>
        </div>

        <div id="preview-controls">
          <button id="btn-adjust" class="edit-btn"><span>‚úÇÔ∏è</span> AjusteazƒÉ</button>
          <button id="btn-enhance" class="edit-btn active"><span>‚ú®</span> √émbunƒÉtƒÉ»õe»ôte</button>
          <button id="btn-bw" class="edit-btn"><span>‚óê</span> Alb-Negru</button>
        </div>
      </div>

      <!-- Gallery Modal -->
      <div id="gallery-modal" class="modal hidden">
        <div class="modal-header">
          <button id="btn-gallery-back" class="modal-btn">‚úï</button>
          <span>ScanƒÉri (<span id="scan-count">0</span>)</span>
          <button id="btn-download-all" class="modal-btn primary">üì•</button>
        </div>

        <div id="gallery-grid"></div>

        <div id="gallery-actions">
          <button id="btn-clear-all" class="danger-btn">»òterge Tot</button>
        </div>
      </div>

      <!-- Loading Overlay -->
      <div id="loading" class="hidden">
        <div class="spinner"></div>
        <span id="loading-text">Se √ÆncarcƒÉ OpenCV...</span>
      </div>

      <!-- Toast Notifications -->
      <div id="toast-container"></div>
    </div>

    <!-- OpenCV.js -->
    <script async src="vendor/opencv.js" onload="onOpenCvReady()"></script>
    <script src="app.js"></script>
  </body>
</html>
