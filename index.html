<!-- index.html -->
<!doctype html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>Scanner Documente</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
  </head>
  <body>
    <div id="app">
      <!-- ==================== ECRAN HOME ==================== -->
      <section id="screen-home" class="screen active">
        <header class="home-header">
          <h1>Scanner Documente</h1>
        </header>

        <div class="doc-grid">
          <button class="doc-type" data-type="buletin-nou">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/buletin-nou.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Buletin nou</span>
          </button>

          <button class="doc-type" data-type="buletin-vechi">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/buletin-vechi.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Buletin vechi</span>
          </button>

          <button class="doc-type" data-type="certificat-vechi">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/certificat-vechi.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Certificat naÈ™tere vechi</span>
          </button>

          <button class="doc-type" data-type="certificat-nou">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/certificat-nou.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Certificat naÈ™tere nou</span>
          </button>

          <button class="doc-type" data-type="pasaport">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/pasaport.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">PaÈ™aport</span>
          </button>

          <button class="doc-type" data-type="a4">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/a4.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Document A4</span>
          </button>
        </div>

        <!-- SecÈ›iune pagini scanate (vizibilÄƒ doar cÃ¢nd existÄƒ pagini) -->
        <section id="scanned-section" class="scanned-section hidden">
          <div class="scanned-header">
            <h2>Pagini scanate (<span id="pages-count">0</span>)</h2>
          </div>
          <div id="pages-list" class="pages-list">
            <!-- Thumbnail-uri generate din JS -->
          </div>
          <button id="btn-download" class="btn-download">DescarcÄƒ PDF</button>
        </section>
      </section>

      <!-- ==================== ECRAN CAMERÄ‚ ==================== -->
      <section id="screen-camera" class="screen">
        <!-- Header camerÄƒ -->
        <header class="camera-header">
          <button id="btn-back-home" class="btn-icon-round" aria-label="ÃŽnapoi">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
          </button>

          <!-- Selector tip document -->
          <div class="type-selector">
            <button id="btn-type-selector" class="btn-type-selector">
              <span id="current-type-label">Buletin nou</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6" />
              </svg>
            </button>
            <!-- Dropdown -->
            <div id="type-dropdown" class="type-dropdown hidden">
              <button class="type-option" data-type="buletin-nou">Buletin nou</button>
              <button class="type-option" data-type="buletin-vechi">Buletin vechi</button>
              <button class="type-option" data-type="certificat-vechi">
                Certificat naÈ™tere vechi
              </button>
              <button class="type-option" data-type="certificat-nou">Certificat naÈ™tere nou</button>
              <button class="type-option" data-type="pasaport">PaÈ™aport</button>
              <button class="type-option" data-type="a4">Document A4</button>
            </div>
          </div>

          <button id="btn-flash" class="btn-icon-round" aria-label="LanternÄƒ">
            <svg
              id="flash-icon-off"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
            </svg>
            <svg id="flash-icon-on" class="hidden" viewBox="0 0 24 24" fill="currentColor">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
            </svg>
          </button>
        </header>

        <!-- Video preview -->
        <video id="camera-preview" autoplay playsinline></video>

        <!-- Ghidaj overlay -->
        <div class="ghidaj-container">
          <div id="ghidaj" class="ghidaj" data-type="buletin-nou"></div>
        </div>

        <!-- Tips -->
        <div id="camera-tips" class="camera-tips">
          <p class="tip active" data-tip="1">ðŸ“± Èšine telefonul deasupra documentului</p>
          <p class="tip" data-tip="2">ðŸ”² ÃŽncadreazÄƒ documentul Ã®n chenar</p>
          <p class="tip" data-tip="3">ðŸ’¡ AsigurÄƒ-te cÄƒ ai luminÄƒ suficientÄƒ</p>
        </div>

        <!-- Buton capturÄƒ -->
        <div class="camera-bottom">
          <button id="btn-capture" class="btn-capture" aria-label="FotografiazÄƒ">
            <span class="capture-ring"></span>
            <span class="capture-center"></span>
          </button>
        </div>
      </section>

      <!-- ==================== ECRAN EDITARE ==================== -->
      <!-- ÃŽn screen-edit, adaugÄƒ instrucÈ›iunile dupÄƒ edit-header -->
      <section id="screen-edit" class="screen">
        <header class="edit-header">
          <button id="btn-back-camera" class="btn-icon-round" aria-label="ÃŽnapoi la camerÄƒ">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
          </button>
          <h2>AjusteazÄƒ imaginea</h2>
          <div class="spacer"></div>
        </header>

        <!-- Container pentru imagine È™i puncte de decupare -->
        <div class="crop-container">
          <!-- InstrucÈ›iuni -->
          <div class="crop-instructions">
            <p>â†” SetazÄƒ colÈ›urile documentului pentru a Ã®mbunÄƒtÄƒÈ›i decuparea</p>
          </div>

          <canvas id="edit-canvas"></canvas>

          <!-- Punctele de decupare -->
          <div class="crop-overlay">
            <div class="crop-corner" data-corner="tl"></div>
            <div class="crop-corner" data-corner="tr"></div>
            <div class="crop-corner" data-corner="bl"></div>
            <div class="crop-corner" data-corner="br"></div>
            <svg class="crop-lines">
              <polygon id="crop-polygon" />
            </svg>
          </div>
        </div>

        <!-- Filtre -->
        <div class="filters-section">
          <h3>Filtru</h3>
          <div class="filters-list">
            <button class="filter-btn active" data-filter="original">
              <div class="filter-preview original"></div>
              <span>Original</span>
            </button>
            <button class="filter-btn" data-filter="grayscale">
              <div class="filter-preview grayscale"></div>
              <span>Alb-negru</span>
            </button>
            <button class="filter-btn" data-filter="high-contrast">
              <div class="filter-preview high-contrast"></div>
              <span>Contrast</span>
            </button>
            <button class="filter-btn" data-filter="sharpen">
              <div class="filter-preview sharpen"></div>
              <span>Claritate</span>
            </button>
          </div>
        </div>

        <!-- AcÈ›iuni -->
        <div class="edit-actions">
          <button id="btn-retake" class="btn-secondary">RefÄƒ poza</button>
          <button id="btn-confirm" class="btn-primary">ConfirmÄƒ</button>
        </div>
      </section>

      <!-- ActualizeazÄƒ secÈ›iunea scanned-section din screen-home -->
      <section id="scanned-section" class="scanned-section hidden">
        <div class="scanned-header">
          <h2>Pagini scanate (<span id="pages-count">0</span>)</h2>
        </div>
        <div id="pages-list" class="pages-list"></div>
        <div class="scanned-actions">
          <button id="btn-preview-pdf" class="btn-preview-pdf">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
              <circle cx="12" cy="12" r="3" />
            </svg>
            Previzualizare
          </button>
          <button id="btn-download" class="btn-download">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
            </svg>
            DescarcÄƒ PDF
          </button>
        </div>
      </section>

      <!-- Modal nume document (adaugÄƒ Ã®nainte de </div> #app) -->
      <div id="modal-filename" class="modal-overlay hidden">
        <div class="modal">
          <h3>Numele documentului</h3>
          <input type="text" id="input-filename" placeholder="documente-scanate" value="" />
          <div class="modal-actions">
            <button id="btn-modal-cancel" class="btn-cancel">AnuleazÄƒ</button>
            <button id="btn-modal-confirm" class="btn-confirm-modal">DescarcÄƒ</button>
          </div>
        </div>
      </div>

      <!-- Ecran preview PDF (adaugÄƒ dupÄƒ screen-edit) -->
      <section id="screen-preview-pdf" class="screen">
        <header class="preview-pdf-header">
          <button id="btn-back-from-preview" class="btn-icon-round" aria-label="ÃŽnapoi">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
          </button>
          <h2>Previzualizare PDF</h2>
          <div class="spacer"></div>
        </header>

        <div id="preview-pdf-container" class="preview-pdf-container">
          <!-- Paginile generate din JS -->
        </div>

        <div class="preview-pdf-actions">
          <button id="btn-download-from-preview" class="btn-download">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
            </svg>
            DescarcÄƒ PDF
          </button>
        </div>
      </section>
    </div>

    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="js/app.js" type="module"></script>
  </body>
</html>
