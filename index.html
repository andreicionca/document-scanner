<!-- index.html -->
<!doctype html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>Scanner Documente</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
  </head>
  <body>
    <div id="app">
      <!-- ==================== ECRAN HOME ==================== -->
      <section id="screen-home" class="screen active">
        <header class="home-header">
          <h1>Scanner Documente</h1>
        </header>

        <div class="doc-grid">
          <button class="doc-type" data-type="buletin-nou">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/buletin-nou.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Buletin nou</span>
          </button>

          <button class="doc-type" data-type="buletin-vechi">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/buletin-vechi.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Buletin vechi</span>
          </button>

          <button class="doc-type" data-type="certificat-vechi">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/certificat-vechi.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Certificat naÈ™tere vechi</span>
          </button>

          <button class="doc-type" data-type="certificat-nou">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/certificat-nou.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Certificat naÈ™tere nou</span>
          </button>

          <button class="doc-type" data-type="pasaport">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/pasaport.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">PaÈ™aport</span>
          </button>

          <button class="doc-type" data-type="a4">
            <div class="doc-icon-wrapper">
              <img src="assets/icons/a4.png" alt="" class="doc-icon" />
            </div>
            <span class="doc-label">Document A4</span>
          </button>
        </div>

        <!-- SecÈ›iune pagini scanate -->
        <section id="scanned-section" class="scanned-section hidden">
          <div class="scanned-header">
            <h2>Pagini scanate (<span id="pages-count">0</span>)</h2>
          </div>
          <div id="pages-list" class="pages-list"></div>
          <div class="scanned-actions">
            <button id="btn-preview-pdf" class="btn-preview-pdf">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
              Previzualizare
            </button>
            <button id="btn-download" class="btn-download">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
              </svg>
              DescarcÄƒ
            </button>
          </div>
        </section>
      </section>

      <!-- ==================== ECRAN CAMERÄ‚ ==================== -->
      <section id="screen-camera" class="screen">
        <header class="camera-header">
          <button id="btn-back-home" class="btn-icon-round" aria-label="ÃŽnapoi">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
          </button>

          <div class="type-selector">
            <button id="btn-type-selector" class="btn-type-selector">
              <span id="current-type-label">Buletin nou</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6" />
              </svg>
            </button>
            <div id="type-dropdown" class="type-dropdown hidden">
              <button class="type-option" data-type="buletin-nou">Buletin nou</button>
              <button class="type-option" data-type="buletin-vechi">Buletin vechi</button>
              <button class="type-option" data-type="certificat-vechi">
                Certificat naÈ™tere vechi
              </button>
              <button class="type-option" data-type="certificat-nou">Certificat naÈ™tere nou</button>
              <button class="type-option" data-type="pasaport">PaÈ™aport</button>
              <button class="type-option" data-type="a4">Document A4</button>
            </div>
          </div>

          <button id="btn-flash" class="btn-icon-round" aria-label="LanternÄƒ">
            <svg
              id="flash-icon-off"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
            </svg>
            <svg id="flash-icon-on" class="hidden" viewBox="0 0 24 24" fill="currentColor">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
            </svg>
          </button>
        </header>

        <video id="camera-preview" autoplay playsinline></video>

        <div class="ghidaj-container">
          <div id="ghidaj" class="ghidaj" data-type="buletin-nou"></div>
        </div>

        <div id="camera-tips" class="camera-tips">
          <p class="tip active">ðŸ“± Èšine telefonul deasupra documentului</p>
        </div>

        <div class="camera-bottom">
          <button id="btn-capture" class="btn-capture" aria-label="FotografiazÄƒ">
            <span class="capture-ring"></span>
            <span class="capture-center"></span>
          </button>
        </div>
      </section>

      <!-- ==================== ECRAN EDITARE ==================== -->
      <section id="screen-edit" class="screen">
        <header class="edit-header">
          <button id="btn-back-camera" class="btn-icon-round" aria-label="ÃŽnapoi la camerÄƒ">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
          </button>
          <h2>AjusteazÄƒ imaginea</h2>
          <div class="spacer"></div>
        </header>

        <!-- InstrucÈ›iuni DEASUPRA containerului -->
        <div class="crop-instructions">
          <p>Trage colÈ›urile albastre pentru a ajusta decuparea</p>
        </div>

        <!-- Container pentru imagine È™i puncte de decupare -->
        <div class="crop-container">
          <canvas id="edit-canvas"></canvas>
          <div class="crop-overlay">
            <div class="crop-corner" data-corner="tl"></div>
            <div class="crop-corner" data-corner="tr"></div>
            <div class="crop-corner" data-corner="bl"></div>
            <div class="crop-corner" data-corner="br"></div>
            <svg class="crop-lines">
              <polygon id="crop-polygon" />
            </svg>
          </div>
        </div>

        <!-- Filtre -->
        <div class="filters-section">
          <h3>Filtru</h3>
          <div class="filters-list">
            <button class="filter-btn active" data-filter="original">
              <div class="filter-preview original"></div>
              <span>Original</span>
            </button>
            <button class="filter-btn" data-filter="grayscale">
              <div class="filter-preview grayscale"></div>
              <span>Alb-negru</span>
            </button>
            <button class="filter-btn" data-filter="high-contrast">
              <div class="filter-preview high-contrast"></div>
              <span>Contrast</span>
            </button>
            <button class="filter-btn" data-filter="sharpen">
              <div class="filter-preview sharpen"></div>
              <span>Claritate</span>
            </button>
          </div>
        </div>

        <!-- AcÈ›iuni -->
        <div class="edit-actions">
          <button id="btn-retake" class="btn-secondary">RefÄƒ poza</button>
          <button id="btn-confirm" class="btn-primary">ConfirmÄƒ</button>
        </div>
      </section>

      <!-- ==================== ECRAN CONFIRMARE (NOU) ==================== -->
      <section id="screen-confirm" class="screen">
        <header class="confirm-header">
          <h2>PaginÄƒ salvatÄƒ!</h2>
        </header>

        <div class="confirm-preview">
          <img id="confirm-image" src="" alt="Pagina scanatÄƒ" />
        </div>

        <div class="confirm-actions">
          <button id="btn-add-another" class="btn-secondary">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 5v14M5 12h14" />
            </svg>
            AdaugÄƒ altÄƒ paginÄƒ
          </button>
          <button id="btn-finish-scanning" class="btn-primary">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 6L9 17l-5-5" />
            </svg>
            Gata, finalizeazÄƒ
          </button>
        </div>
      </section>

      <!-- ==================== ECRAN PREVIEW PDF ==================== -->
      <section id="screen-preview-pdf" class="screen">
        <header class="preview-pdf-header">
          <button id="btn-back-from-preview" class="btn-icon-round" aria-label="ÃŽnapoi">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
          </button>
          <h2>Previzualizare</h2>
          <div class="spacer"></div>
        </header>

        <div id="preview-pdf-container" class="preview-pdf-container"></div>

        <div class="preview-pdf-actions">
          <button id="btn-download-from-preview" class="btn-download">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
            </svg>
            DescarcÄƒ
          </button>
        </div>
      </section>

      <!-- ==================== MODAL DESCÄ‚RCARE ==================== -->
      <div id="modal-download" class="modal-overlay hidden">
        <div class="modal">
          <h3>DescarcÄƒ documentele</h3>

          <div class="download-format">
            <label class="format-option">
              <input type="radio" name="format" value="pdf" checked />
              <span class="format-label">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                  <polyline points="14 2 14 8 20 8" />
                </svg>
                PDF (un singur fiÈ™ier)
              </span>
            </label>
            <label class="format-option">
              <input type="radio" name="format" value="images" />
              <span class="format-label">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <polyline points="21 15 16 10 5 21" />
                </svg>
                Imagini separate (JPG)
              </span>
            </label>
          </div>

          <input type="text" id="input-filename" placeholder="Numele fiÈ™ierului" value="" />

          <div class="modal-actions">
            <button id="btn-modal-cancel" class="btn-cancel">AnuleazÄƒ</button>
            <button id="btn-modal-confirm" class="btn-confirm-modal">DescarcÄƒ</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="js/app.js" type="module"></script>
  </body>
</html>
